(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e,t,a){e.exports=a(279)},133:function(e,t,a){},279:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(26),c=a.n(r),o=a(20),s=a(12),l=a(27),m=(a(133),{projectName:"tetris"}),u=a(11),d=a(41),h=a(19),v=a.n(h);var f=function(e){var t=e.name,a=e.className;return i.a.createElement("i",{className:v()("material-icons",Object(u.a)({},a,a)),children:t})},p=a(38);var g=function(e){var t=e.className,a=e.component,n=e.disabled,r=Object(d.a)(e,["className","component","disabled"]);return i.a.createElement(a||"a",Object(p.a)({className:v()("tappable",{disabled:n},Object(u.a)({},t,t))},r))};var E=function(e){var t=e.title,a=e.backTo;return i.a.createElement("div",{className:"layout-header"},a&&i.a.createElement("div",{className:"layout-header-item"},i.a.createElement(g,{className:"btn btn-small",component:o.b,to:a},i.a.createElement(f,{name:"arrow_back"}))),i.a.createElement("div",{className:"layout-header-item layout-header-title"},t||"Blog"))};function b(e){var t=e.message,a=e.actionLabel,n=e.actionFn;return i.a.createElement("div",{className:"layout"},i.a.createElement("div",{className:"layout-content is-centered pad"},i.a.createElement("p",null,t),a&&n&&i.a.createElement(g,{className:"btn mgn-t",onClick:n},a)))}b.defaultProps={actionLabel:"Try Again"};var S=a(120),N="Tetris",_=["site_name","title","description","image","url"];var y=function(e){var t=Object(p.a)({},e,{site_name:N});return i.a.createElement(S.Helmet,null,t.title?i.a.createElement("title",null,t.title," | ",N):null,t.description?i.a.createElement("meta",{name:"description",content:t.description}):null,_.map(function(e,a){return t[e]?i.a.createElement("meta",{key:a,property:"og:"+e,content:t[e]}):null}))};var k=a(9),w=a(16),x=a(125),j=a(121),O=a(126),z=a(122),C=a.n(z),I=function(e){return function(t){var a=function(e){function a(){return Object(k.a)(this,a),Object(x.a)(this,Object(j.a)(a).apply(this,arguments))}return Object(O.a)(a,e),Object(w.a)(a,[{key:"render",value:function(){return i.a.createElement(t,this.props)}}]),a}(n.Component);return C()(e,function(e,t){return a.prototype[t]=e}),a}},P=a(40),L=a.n(P);var A=function(){return L()(l.b.apply(void 0,arguments),l.c)},T=a(1),M=function e(){var t=this;Object(k.a)(this,e),this._timer=null,this.content=null,this.timeout=1e3,this.show=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.hide(),t.content=e,t.timeout=a,t._timer=setTimeout(t.hide,a)},this.hide=function(){clearTimeout(t._timer),t.content=null,t.timeout=1e3}};Object(T.h)(M,{content:T.m,show:T.d,hide:T.d});var V=new M;var R=A("toastStore")(function(e){var t=e.toastStore;return t.content?i.a.createElement("div",{className:"toast"},i.a.createElement("div",{className:"toast-content"},t.content)):null}),F=a(13),G=a(123),W=a.n(G);function q(e){return null===e||void 0===e}function B(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Array(e).fill(0).map(function(){return new Array(t).fill(-1)})}function H(e,t){for(var a=e.length,n=0===a?0:e[0].length,i=0,r=0;i<a;){for(;r<n;){var c=t(i,r,e);if(!q(c))return c;r+=1}r=0,i+=1}}function J(e){var t=e.length,a=B(e[0].length,t);return H(e,function(n,i){a[i][t-1-n]=e[n][i]}),a}var D=a(124),Q=a.n(D);var U=function(){function e(t,a,n){var i=this;Object(k.a)(this,e),this.matrix=null,this.position=null,this._isValidConfiguration=function(e,t){var a=i._calculateTopLeftPosition(t,e),n=Object(F.a)(a,2),r=n[0],c=n[1];return!(e[0]>i.grid.rowSize-1||e[1]<0||e[1]+t[0].length-1>=i.grid.colSize)&&!H(t,function(e,t,a){var n=a[e][t]>-1,o=!1;if(i.grid.isValidPosition(r+e,c+t)&&(o=i.grid.matrix[r+e][c+t]>-1),n&&o)return!0})},this._canMove=function(e){return i._isValidConfiguration(e,i.matrix)},this._canRotate=function(){return i._isValidConfiguration(i.position,J(i.matrix))},this._calculateTopLeftPosition=function(e,t){var a=e.length,n=Object(F.a)(t,2);return[n[0]-a+1,n[1]]},this.advance=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t&&i._advanceInterval&&clearInterval(i._advanceInterval),i.position){var a=Object(F.a)(i.position,2);e=[a[0]+1,a[1]]}else e=[0,i.initialColIndex];i._canMove(e)?(i.position=e,t&&i.advance(t)):(clearInterval(i._advanceInterval),i.grid.placeAndEvaluate(i))},this.move=function(e){if(i.position){var t=Object(F.a)(i.position,2),a=[t[0],t[1]+e];i._canMove(a)&&(i.position=a)}},this.rotate=function(){i.position&&i._canRotate()&&(i.matrix=J(i.matrix))},this.stop=function(){clearTimeout(i._advanceInterval)},this.id=t,this.matrix=a,this.grid=n,this._init()}return Object(w.a)(e,null,[{key:"generate",value:function(t,a){var n=Q()(e.fixedShapes[function(e,t){var a=Math.floor(Math.random()*(t-e+1))+e;return a>t&&(a=t),a}(0,e.fixedShapes.length-1)]);return H(n,function(e,a){-1!==n[e][a]&&(n[e][a]=t)}),new e(t,n,a)}}]),Object(w.a)(e,[{key:"_init",value:function(){var e=this;this.advance(),this._advanceInterval=setInterval(function(){return e.advance()},this.grid.speed)}},{key:"topLeftPosition",get:function(){return this.position?this._calculateTopLeftPosition(this.matrix,this.position):null}},{key:"initialColIndex",get:function(){return parseInt((this.grid.colSize-1)/2,10)-parseInt(this.colSize/2,10)}},{key:"colSize",get:function(){return this.matrix[0].length}},{key:"rowSize",get:function(){return this.matrix.length}}]),e}();U.fixedShapes=[[[1,-1,-1,-1],[1,1,1,1]],[[-1,-1,-1,1],[1,1,1,1]],[[1,1,1]],[[-1,1,-1],[1,1,1]]],Object(T.h)(U,{matrix:T.m,position:T.m,topLeftPosition:T.e,advance:T.d,move:T.d,quickPlace:T.d});var K=U,X=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(k.a)(this,e),this.matrix=null,this.score=0,this.isStarted=!1,this.isEnded=!1,this.shape=null,this._nextShapeId=0,this._addShape=function(){return t.shape=K.generate(t._nextShapeId++,t)},this._evaluate=function(){var e=Object(T.o)(t.matrix),a=W()(e,function(e){return e.every(function(e){return e>-1})}),n=B(a.length,t.colSize);Array.prototype.unshift.apply(e,n),t.score+=a.length*t.colSize,t.matrix=e},this._place=function(e){var a=e.topLeftPosition;if(a){var n=Object(F.a)(a,2),i=n[0],r=n[1];return!H(e.matrix,function(a,n,c){if(c[a][n]>-1){if(!t.isValidPosition(i+a,r+n))return!0;t.matrix[a+i][n+r]=e.id}})&&(t.shape=null,!0)}return!1},this.isValidPosition=function(e,a){return e>=0&&e<t.rowSize&&a>=0&&a<t.colSize},this.move=function(e){!t.isEnded&&t.shape&&t.shape.move(e)},this.placeAndEvaluate=function(e){t._place(e)?(t._evaluate(),t._addShape()):t.isEnded=!0},this.quickPlace=function(){!t.isEnded&&t.shape&&t.shape.advance(!0)},this.rotate=function(){!t.isEnded&&t.shape&&t.shape.rotate()},this.restart=function(){t.shape&&t.shape.stop(),t.matrix=B(t.rowSize,t.colSize),t.isStarted=!1,t.isEnded=!1,t.shape=null,t.score=0,t._nextShapeId=0,t.start()},this.start=function(){t.isStarted||(t._addShape(),t.isStarted=!0)},this._options=Object.assign({},e.defaultOptions,a),this.matrix=B(this.rowSize,this.colSize)}return Object(w.a)(e,[{key:"colSize",get:function(){return this._options.colSize}},{key:"rowSize",get:function(){return this._options.rowSize}},{key:"isAction",get:function(){return this.isStarted&&!this.isEnded}},{key:"speed",get:function(){return this._options.speed}},{key:"matrixWithShapes",get:function(){var e=this,t=Object(T.o)(this.matrix);if(this.shape&&this.shape.position){var a=Object(F.a)(this.shape.topLeftPosition,2),n=a[0],i=a[1];H(this.shape.matrix,function(a,r){e.shape.matrix[a][r]>-1&&e.isValidPosition(n+a,i+r)&&(t[n+a][i+r]=e.shape.id)})}return t}}]),e}();X.defaultOptions={rowSize:15,colSize:10,speed:500},Object(T.h)(X,{matrix:T.m,shape:T.m,isStarted:T.m,isEnded:T.m,score:T.m,_addShape:T.d,_evaluate:T.d,_place:T.d,placeAndEvaluate:T.d,restart:T.d,start:T.d,matrixWithShapes:T.e});var Y=X,Z=function e(){var t=this;Object(k.a)(this,e),this.instance=new Y,this.start=function(){t.instance.start()},this.retry=function(){return t.instance.restart()},this.rotate=function(){return t.instance.rotate()},this.move=function(e){return t.instance.move(e)},this.place=function(){return t.instance.quickPlace()}};Object(T.h)(Z,{instance:T.m,start:T.d});var $=new Z,ee="#f2f2f2",te=["#69A2B0","#659157","#E05263","#477998","#663F46","#7692FF"],ae=function(e){var t=$;if(t.instance)switch(e.keyCode){case 37:t.move(-1);break;case 38:t.rotate();break;case 39:t.move(1);break;case 40:t.place()}};var ne=L()(I({componentDidMount:function(){document.addEventListener("keydown",ae)},componentWillUnmount:function(){document.removeEventListener("keydown",ae)}}),A("gameStore"))(function(e){var t=e.gameStore.instance.matrixWithShapes;return i.a.createElement("div",{className:"game-grid"},t.map(function(e,t){return i.a.createElement("div",{key:"row/".concat(t),className:"game-grid-row"},e.map(function(e,t){return i.a.createElement("div",{key:"col/".concat(t),style:{backgroundColor:e>-1?te[e%te.length]:ee},className:"game-grid-col"})}))}))});var ie=A("gameStore","toastStore")(function(e){var t=e.gameStore,a=(e.toastStore,t.instance);return i.a.createElement("div",{className:"game-details"},i.a.createElement("div",{className:"game-score-container game-detail sep-b"},i.a.createElement("div",{className:"title mgn-b"},"Score"),i.a.createElement("div",{className:"game-score"},a.score.toString().padStart(4,"0"))),i.a.createElement("div",{className:"game-controls-container game-detail sep-b"},i.a.createElement("div",{className:"title mgn-b"},"Controls"),i.a.createElement("div",{className:"game-controls"},i.a.createElement("div",{className:"game-control"},i.a.createElement("div",{className:"game-control-label"},"Rotate"),i.a.createElement(g,{className:"btn btn-small",onClick:function(){return t.rotate()}},i.a.createElement(f,{name:"arrow_upward"})))),i.a.createElement("div",{className:"game-controls"},i.a.createElement("div",{className:"game-control"},i.a.createElement(g,{className:"btn btn-small",onClick:function(){return t.move(-1)}},i.a.createElement(f,{name:"arrow_back"})),i.a.createElement("div",{className:"game-control-label"},"Move Left")),i.a.createElement("div",{className:"game-control"},i.a.createElement(g,{className:"btn btn-small",onClick:function(){return t.place()}},i.a.createElement(f,{name:"arrow_downward"})),i.a.createElement("div",{className:"game-control-label"},"Quick Place")),i.a.createElement("div",{className:"game-control"},i.a.createElement(g,{className:"btn btn-small",onClick:function(){return t.move(1)}},i.a.createElement(f,{name:"arrow_forward"})),i.a.createElement("div",{className:"game-control-label"},"Move Right")))),function(){var e;return e=a.isStarted?a.isEnded?{children:"Restart Game",className:"btn btn-small",onClick:function(){return t.retry()}}:{children:"Reset Game",className:"btn btn-danger btn-small",onClick:function(){return t.retry()}}:{children:"Start Game",className:"btn btn-small",onClick:function(){return t.start()}},i.a.createElement("div",{className:"game-actions game-detail sep-b"},i.a.createElement("div",{className:"title mgn-b"},"Actions"),i.a.createElement(g,e))}(),function(){var e;return e=a.isStarted?a.isEnded?{children:"Game Ended!",className:"danger"}:{children:"In Progress",className:"primary"}:{children:"Not Started"},i.a.createElement("div",{className:"game-status game-detail sep-b"},i.a.createElement("div",{className:"title mgn-b"},"Status"),i.a.createElement("div",e))}())});var re=A("gameStore")(function(e){return e.gameStore,i.a.createElement("div",{className:"layout is-main"},i.a.createElement(y,{title:"Home"}),i.a.createElement(E,{title:"Tetris"}),i.a.createElement("div",{className:"layout-content"},i.a.createElement("div",{className:"game"},i.a.createElement(ne,null),i.a.createElement(ie,null))))}),ce={gameStore:$,toastStore:V};var oe=function(){return i.a.createElement(l.a,ce,i.a.createElement(o.a,{basename:"/demos/".concat(m.projectName)},i.a.createElement(s.c,null,i.a.createElement(s.a,{exact:!0,path:"/",component:re})),i.a.createElement(R,null)))};document.addEventListener("touchstart",function e(t){document.documentElement.classList.add("can-touch"),document.removeEventListener("touchstart",e,!1)},!1),c.a.render(i.a.createElement(oe,null),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.457a14b8.chunk.js.map