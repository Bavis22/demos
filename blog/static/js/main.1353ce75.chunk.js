(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){e.exports=a(283)},142:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),o=a.n(s),c=a(16),i=a(9),l=a(17),m=a(20),u=a(31),d=a.n(u),p=(a(142),a(14)),h=a.n(p),E=a(15),v=a(23),b=a.n(v);var g=function(e){var t=e.className,a=e.square,n=Object(c.a)(e,["className","square"]);return r.a.createElement("div",Object.assign({className:b()("card",{"is-square":a},Object(E.a)({},t,t))},n))};var f=function(e){var t=e.name,a=e.className;return r.a.createElement("i",{className:b()("material-icons",Object(E.a)({},a,a)),children:t})};var N=function(e){var t=e.icon,a=e.title;return r.a.createElement("div",{className:"detail-row"},r.a.createElement("div",{className:"detail-row-icon"},r.a.createElement(f,{name:t})),r.a.createElement("div",{className:"detail-row-title"},a))},L=a(44);var y=function(e){var t=e.className,a=e.component,n=e.disabled,s=Object(c.a)(e,["className","component","disabled"]);return r.a.createElement(a||"a",Object(L.a)({className:b()("tappable",{disabled:n},Object(E.a)({},t,t))},s))};function k(e){var t=e.message,a=e.retryLabel,n=e.retryFn;return r.a.createElement("div",{className:"layout"},r.a.createElement("div",{className:"layout-content is-centered pad"},r.a.createElement("p",null,t),a&&n&&r.a.createElement(y,{className:"btn mgn-t",onClick:n},a)))}k.defaultProps={retryLabel:"Try Again"};var j=k;var w=function(e){var t=e.title,a=e.backTo;return r.a.createElement("div",{className:"layout-header"},a&&r.a.createElement("div",{className:"layout-header-item"},r.a.createElement(y,{className:"btn btn-small",component:i.b,to:a},r.a.createElement(f,{name:"arrow_back"}))),r.a.createElement("div",{className:"layout-header-item layout-header-title"},t||"Blog"))},O=a(11),x=a(12),S=a(129),I=a(125),C=a(130),P=a(126),T=a.n(P),F=function(e){return function(t){var a=function(e){function a(){return Object(O.a)(this,a),Object(S.a)(this,Object(I.a)(a).apply(this,arguments))}return Object(C.a)(a,e),Object(x.a)(a,[{key:"render",value:function(){return r.a.createElement(t,this.props)}}]),a}(n.Component);return T()(e,function(e,t){return a.prototype[t]=e}),a}};var _=function(){return r.a.createElement("div",{className:"layout"},r.a.createElement("div",{className:"layout-content is-centered pad"},r.a.createElement("div",{className:"spinner"})))};var R=function(){return h()(m.b.apply(void 0,arguments),m.c)},A=a(127),B="Blog",G=["site_name","title","description","image","url"];var M=function(e){var t=Object(L.a)({},e,{site_name:B});return r.a.createElement(A.Helmet,null,t.title?r.a.createElement("title",null,B," | ",t.title):null,t.description?r.a.createElement("meta",{name:"description",content:t.description}):null,G.map(function(e,a){return t[e]?r.a.createElement("meta",{key:a,property:"og:"+e,content:t[e]}):null}))},U=a(2),D=a.n(U),J=a(1),q={API_BASE_URL:"https://jsonplaceholder.typicode.com",PAGE_LIMIT:10},H=a(32),z=a(128),K=a.n(z);function Q(e,t){return"".concat(q.API_BASE_URL).concat(e,"?").concat(function(e){return K()(e,function(e,t){return"".concat(t,"=").concat(e)}).join("&")}(t))}function V(e){return W.apply(this,arguments)}function W(){return(W=Object(H.a)(D.a.mark(function e(t){var a,n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,t.json();case 4:a=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(!t.ok){e.next=13;break}return e.abrupt("return",a);case 13:throw(n=new Error(t.statusText)).isFromServer=!0,n.response=t,n.responseJson=a,n;case 18:case"end":return e.stop()}},e,null,[[1,7]])}))).apply(this,arguments)}function X(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(H.a)(D.a.mark(function e(t,a){var n,r,s,o,i,l,m,u,d,p=arguments;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>2&&void 0!==p[2]?p[2]:null,r=p.length>3&&void 0!==p[3]?p[3]:{},s={Accept:"application/json","Content-Type":"application/json"},o={method:t},n&&(o.body=JSON.stringify(n)),i=r.headers,l=r.params,m=Object(c.a)(r,["headers","params"]),u=Object.assign(o,{headers:Object.assign(s,i)},m),e.next=9,fetch(Q(a,l),u);case 9:return d=e.sent,e.abrupt("return",V(d));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Z={delete:function(e){return X("DELETE","/posts/".concat(e))},get:function(e){return X("GET","/posts/".concat(e))},getList:function(e){return X("GET","/posts",null,{params:{skip:function(e){return q.PAGE_LIMIT*(e-1)}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),limit:q.PAGE_LIMIT,userId:e}})}},$=function(){function e(t,a){Object(O.a)(this,e),this.isLoading=!1,this.loadError=!0,this.needsReset=!1,this.pageNum=1,this.pages=J.n.map({}),this.load=Object(J.i)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.needsReset&&(this.pages.clear(),this.needsReset=!1),this.pageNum=t,this.isLoading=!0,this.loadError=null,e.prev=4,e.next=7,Z.getList(this.id,t);case 7:a=e.sent,this.pages.set(t,a),this.isLoading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),this.loadError=e.t0,this.isLoading=!1;case 16:case"end":return e.stop()}},e,this,[[4,12]])})),this.id=t,this.load(a)}return Object(x.a)(e,[{key:"setNeedsReset",value:function(){this.needsReset=!0}},{key:"data",get:function(){return this.pages.get(this.pageNum)}},{key:"isPageLoaded",get:function(){return!!this.data}}]),e}();Object(J.h)($,{data:J.e,isPageLoaded:J.e,isLoading:J.n,loadError:J.n,needsReset:J.n,pageNum:J.n,setNeedsReset:J.d});var ee=$;var te={getList:function(){return X("GET","/users")}},ae=function(){function e(){Object(O.a)(this,e),this.isLoading=!1,this.loadError=null,this.list=null,this.users=J.n.map({}),this.load=Object(J.i)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,this.loadError=null,e.prev=2,e.next=5,te.getList();case 5:t=e.sent,this.list=t,this.isLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),this.loadError=e.t0,this.isLoading=!1;case 14:case"end":return e.stop()}},e,this,[[2,10]])}))}return Object(x.a)(e,[{key:"loadUser",value:function(e,t){var a=this.users.get(e);a?a.load(t):(a=new ee(e,t),this.users.set(e,a))}},{key:"isLoaded",get:function(){return!!this.list}}]),e}();Object(J.h)(ae,{isLoaded:J.e,isLoading:J.n,list:J.n,loadError:J.n,loadUser:J.d});var ne=new ae;function re(e){var t=e.item;return r.a.createElement("div",{className:"col is-2-tablet is-3-desktop"},r.a.createElement(g,{className:"user-item"},r.a.createElement("p",{className:"title mgn-b"},t.name),r.a.createElement(N,{icon:"work",title:t.company.name}),r.a.createElement(N,{icon:"phone",title:t.phone}),r.a.createElement(N,{icon:"link",title:t.website}),r.a.createElement("div",{className:"user-actions mgn-t"},r.a.createElement(y,{className:"btn btn-inverted btn-small",component:i.b,to:"/user/".concat(t.id)},"See Posts"))))}var se=h()(R("usersStore"),F({componentDidMount:function(){this.props.usersStore.load()}}),R("usersStore"))(function(e){var t=e.usersStore;return r.a.createElement("div",{className:"layout"},r.a.createElement(M,{title:"All Users"}),r.a.createElement(w,{title:"Blog | Users"}),t.isLoaded?0===t.list.length?r.a.createElement(j,{message:"No users available"}):r.a.createElement("div",{className:"layout"},r.a.createElement("div",{className:"layout-content"},r.a.createElement("div",{className:"row is-tiled"},t.list.map(function(e,t){return r.a.createElement(re,{key:t,item:e})})))):t.isLoading?r.a.createElement(_,null):t.loadError?r.a.createElement(j,{message:"Failed to load users",retryFn:function(){return t.load()}}):null)});var oe={getList:function(e){return X("GET","/comments",null,{params:{postId:e}})}},ce=function(){function e(t){Object(O.a)(this,e),this.comments=null,this.data=null,this.isLoading=!1,this.loadError=null,this.isSubmitting=!1,this.areCommentsLoading=!1,this.commnetsLoadError=!1,this.load=Object(J.i)(D.a.mark(function e(){var t,a,n=arguments;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],this.isLoaded&&!t){e.next=16;break}return this.isLoading=!0,this.loadError=null,e.prev=4,e.next=7,Z.get(this.id);case 7:a=e.sent,this.data=a,this.isLoading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),this.loadError=e.t0,this.isLoading=!1;case 16:this.areCommentsLoaded&&this.loadComments();case 17:case"end":return e.stop()}},e,this,[[4,12]])})),this.loadComments=Object(J.i)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.areCommentsLoading=!0,this.commnetsLoadError=null,e.prev=2,e.next=5,oe.getList(this.id);case 5:t=e.sent,this.comments=t,this.areCommentsLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),this.commnetsLoadError=e.t0,this.areCommentsLoading=!1;case 14:case"end":return e.stop()}},e,this,[[2,10]])})),this.delete=Object(J.i)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isSubmitting=!0,e.prev=1,e.next=4,Z.delete(this.id);case 4:this.isSubmitting=!1,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),this.isSubmitting=!1,e.t0;case 11:case"end":return e.stop()}},e,this,[[1,7]])})),this.id=t,this.load()}return Object(x.a)(e,[{key:"areCommentsLoaded",get:function(){return!!this.comments}},{key:"isLoaded",get:function(){return!!this.data}}]),e}();Object(J.h)(ce,{areCommentsLoaded:J.e,areCommentsLoading:J.n,comments:J.n,commnetsLoadError:J.n,data:J.n,isLoaded:J.e,isLoading:J.n,isSubmitting:J.n,loadError:J.n});var ie=ce,le=function(){function e(){Object(O.a)(this,e),this.posts=J.n.map({})}return Object(x.a)(e,[{key:"loadPost",value:function(e){var t=this.posts.get(e);t?t.load():(t=new ie(e),this.posts.set(e,t))}}]),e}();Object(J.h)(ie,{loadPost:J.d});var me=new le;function ue(e){var t=e.item;return r.a.createElement("div",{className:"col post-comment sep-b"},r.a.createElement("div",{className:"post-comment-user"},t.name),r.a.createElement("div",{className:"post-comment-body"},t.body))}var de=h()(R("postsStore"),F({componentDidMount:function(){var e=this.props,t=e.postsStore,a=e.match.params;t.loadPost(a.postId)}}),R("postsStore","usersStore"))(function(e){var t=e.history,a=e.match.params,n=e.postsStore,s=e.usersStore,o=n.posts.get(a.postId),c={title:"Post"};function i(){return l.apply(this,arguments)}function l(){return(l=Object(H.a)(D.a.mark(function e(){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.delete();case 3:(a=s.users.get(o.data.userId.toString()))&&a.setNeedsReset(),t.replace("/user/".concat(o.data.userId)),u.notify.show("Post deleted successfully","success",2e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u.notify.show("Failed to delete post!","error",2e3);case 12:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function m(){return r.a.createElement("div",{className:"layout-content post"},r.a.createElement(g,{className:"mgn-b"},r.a.createElement("div",{className:"title mgn-b"},o.data.title),r.a.createElement("p",{className:"mgn-b"},o.data.body),r.a.createElement(y,{className:"tappable btn btn-danger btn-small",disabled:o.isSubmitting,onClick:i},r.a.createElement(f,{className:"mgn-r",name:"delete"}),"Delete Post")),r.a.createElement(g,null,r.a.createElement("div",{className:"title mgn-b"},"Comments"),o.areCommentsLoaded?r.a.createElement("div",{className:"row is-tiled"},o.comments.map(function(e,t){return r.a.createElement(ue,{key:t,item:e})})):o.areCommentsLoading?r.a.createElement(_,null):o.commnetsLoadError?r.a.createElement(j,{message:"Failed to load comments",retryFn:function(){return o.loadComments()}}):r.a.createElement(j,{message:"Click below to load comments",retryLabel:"Load Comments",retryFn:function(){return o.loadComments()}})))}return o&&o.isLoaded&&(c={title:o.data.title,backTo:"/user/".concat(o.data.userId)}),r.a.createElement("div",{className:"layout"},r.a.createElement(M,{title:"Post"}),r.a.createElement(w,c),o?o.isLoaded?m():o.isLoading?r.a.createElement(_,null):o.loadError?r.a.createElement(j,{message:"Failed to load blog post",retryFn:function(){return n.loadPost(a.postId)}}):void 0:null)}),pe={postsStore:me,usersStore:ne};var he=Object(m.c)(function(e){var t=e.user;return t.data.length>0?r.a.createElement("div",{className:"pagination"},r.a.createElement("div",{className:"pagination-item"},r.a.createElement(y,{className:"btn btn-small btn-round",component:i.b,disabled:1===t.pageNum,to:"/user/".concat(t.id,"/").concat(t.pageNum-1)},r.a.createElement(f,{name:"chevron_left"}))),r.a.createElement("div",{className:"pagination-item"},r.a.createElement("p",null,"Page ",t.pageNum)),r.a.createElement("div",{className:"pagination-item"},r.a.createElement(y,{className:"btn btn-small btn-round",component:i.b,to:"/user/".concat(t.id,"/").concat(t.pageNum+1)},r.a.createElement(f,{name:"chevron_right"})))):null});function Ee(e){var t=e.item;return r.a.createElement("div",{className:"col"},r.a.createElement(g,null,r.a.createElement("p",{className:"title mgn-b"},t.title),r.a.createElement(y,{className:"btn btn-inverted btn-small",component:i.b,to:"/post/".concat(t.id)},"Read More")))}var ve=h()(R("usersStore"),F({componentDidMount:function(){var e=this.props,t=e.usersStore,a=e.match.params,n=a.pageNum?parseInt(a.pageNum,10):1;t.loadUser(a.userId,n)}}),R("usersStore"))(function(e){var t=e.usersStore,a=e.match.params,n=a.pageNum?parseInt(a.pageNum,10):1,s=t.users.get(a.userId);return r.a.createElement("div",{className:"layout"},r.a.createElement(M,{title:"Posts"}),r.a.createElement(w,{backTo:"/home",title:"Blog | Posts"}),s?s.isPageLoaded?0===s.data.length?r.a.createElement(j,{message:"No posts available"}):r.a.createElement("div",{className:"layout-content"},r.a.createElement("div",{className:"row is-tiled"},s.data.map(function(e,t){return r.a.createElement(Ee,{key:t,item:e})})),r.a.createElement(he,{user:s})):s.isLoading?r.a.createElement(_,null):s.loadError?r.a.createElement(j,{message:"Failed to load user posts",retryFn:function(){return s.load(n)}}):null:null)});var be=function(){return r.a.createElement(m.a,pe,r.a.createElement(i.a,null,r.a.createElement(d.a,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",render:function(){return r.a.createElement(l.a,{to:"/home"})}}),r.a.createElement(l.b,{exact:!0,path:"/home",component:se}),r.a.createElement(l.b,{exact:!0,path:"/user/:userId/:pageNum?",render:function(e){var t=e.match,a=Object(c.a)(e,["match"]);return r.a.createElement(ve,Object.assign({key:"".concat(t.params.userId,"/").concat(t.params.pageNum),match:t},a))}}),r.a.createElement(l.b,{exact:!0,path:"/post/:postId",component:de}))))};document.addEventListener("touchstart",function e(t){document.documentElement.classList.add("can-touch"),document.removeEventListener("touchstart",e,!1)},!1),o.a.render(r.a.createElement(be,null),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.1353ce75.chunk.js.map